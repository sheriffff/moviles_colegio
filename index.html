<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,700;1,9..40,400&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'DM Sans', 'Inter', system-ui, -apple-system, sans-serif;
    background: #ffffff;
    color: #333333;
    overflow-x: hidden;
  }

  .toggle-bar {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(255,255,255,0.92);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid #eee;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    padding: 14px 20px;
  }
  .toggle-bar-title {
    font-size: 28px;
    font-weight: 700;
    color: #333333;
    letter-spacing: -0.3px;
  }
  .toggle-bar-desc {
    font-size: 15px;
    font-weight: 400;
    color: #888888;
    margin-top: -4px;
  }
  .toggle-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 12px;
  }
  .toggle-group {
    display: flex;
    gap: 4px;
    background: #f7f7f7;
    border-radius: 12px;
    padding: 5px;
  }
  .toggle-center {
    display: flex;
    flex-direction: column;
    gap: 4px;
    background: #f7f7f7;
    border-radius: 12px;
    padding: 5px;
  }
  .toggle-btn {
    border: none;
    background: transparent;
    font-family: 'DM Sans', 'Inter', system-ui, -apple-system, sans-serif;
    font-size: 15px;
    font-weight: 500;
    color: #888888;
    padding: 10px 24px;
    border-radius: 9px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 9px;
  }
  .toggle-btn:hover {
    color: #4a4a4a;
  }
  .toggle-btn.active {
    background: #ffffff;
    box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    color: #333333;
    font-weight: 600;
  }
  .toggle-btn[data-filter="Andel"].active {
    background: rgba(6,7,134,0.09);
    color: #060786;
    box-shadow: 0 1px 4px rgba(6,7,134,0.15);
  }
  .toggle-btn[data-filter="Fuenllana"].active {
    background: rgba(198,0,39,0.09);
    color: #c60027;
    box-shadow: 0 1px 4px rgba(198,0,39,0.15);
  }
  .toggle-dot {
    width: 11px;
    height: 11px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  .toggle-logo {
    height: 36px;
    object-fit: contain;
    opacity: 0.7;
    transition: opacity 0.2s;
  }
  .toggle-logo:hover {
    opacity: 1;
  }

  .page-content {
    max-width: 940px;
    margin: 0 auto;
    padding: 40px 20px 80px;
  }

  .page-header {
    text-align: center;
    margin-bottom: 56px;
  }

  .section-header {
    margin-top: 64px;
    margin-bottom: 40px;
    padding-bottom: 16px;
    border-bottom: 2px solid #f0f0f0;
  }
  .section-header:first-child {
    margin-top: 0;
  }
  .section-number {
    font-size: 13px;
    font-weight: 600;
    color: #888888;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 6px;
  }
  .section-name {
    font-size: 32px;
    font-weight: 700;
    color: #333333;
    line-height: 1.2;
  }

  .chart-section {
    position: relative;
    margin-bottom: 56px;
  }
  .chart-main {
  }

  .chart-title {
    font-size: 28px;
    font-weight: 700;
    color: #333333;
    line-height: 1.3;
    margin-bottom: 6px;
  }
  .chart-subtitle {
    font-size: 18px;
    font-weight: 400;
    color: #4a4a4a;
    line-height: 1.4;
    margin-bottom: 24px;
  }
  .chart-container {
    width: 100%;
    height: 500px;
  }
  .chart-footnote {
    font-size: 11px;
    color: #888888;
    margin-top: 16px;
    line-height: 1.5;
  }

  .chart-insight {
    position: absolute;
    right: -240px;
    top: 50%;
    transform: translateY(-50%) translateX(12px);
    width: 210px;
    text-align: center;
    opacity: 0;
    transition: all 0.4s ease;
    pointer-events: none;
  }
  .chart-insight.visible {
    opacity: 1;
    transform: translateY(-50%) translateX(0);
    pointer-events: auto;
  }
  .insight-number {
    font-size: 46px;
    font-weight: 700;
    line-height: 1;
    margin-bottom: 8px;
  }
  .insight-label {
    font-size: 14px;
    color: #4a4a4a;
    line-height: 1.4;
  }

  #lock-screen {
    position: fixed;
    inset: 0;
    z-index: 9999;
    background: #ffffff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 20px;
  }
  #lock-screen.hidden { display: none; }
  #lock-screen h2 {
    font-size: 28px;
    font-weight: 700;
    color: #333333;
  }
  #lock-screen input {
    font-family: 'DM Sans', 'Inter', system-ui, -apple-system, sans-serif;
    font-size: 18px;
    padding: 12px 20px;
    border: 2px solid #e0e0e0;
    border-radius: 10px;
    outline: none;
    width: 280px;
    text-align: center;
    transition: border-color 0.2s;
  }
  #lock-screen input:focus {
    border-color: #2a9d8f;
  }
  #lock-screen input.error {
    border-color: #c60027;
    animation: shake 0.4s ease;
  }
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-8px); }
    75% { transform: translateX(8px); }
  }
  .lock-btn {
    font-family: 'DM Sans', 'Inter', system-ui, -apple-system, sans-serif;
    font-size: 16px;
    padding: 10px 36px;
    border: none;
    border-radius: 10px;
    background: #2a9d8f;
    color: #fff;
    cursor: pointer;
    transition: opacity 0.2s;
  }
  .lock-btn:hover {
    opacity: 0.85;
  }
</style>
</head>
<body>

<div id="lock-screen">
  <h2>Acceso restringido</h2>
  <input type="password" id="lock-input" placeholder="Contraseña" autofocus
    onkeydown="if(event.key==='Enter')checkPw()">
  <button class="lock-btn" onclick="checkPw()">Entrar</button>
</div>
<script>
  function checkPw() {
    var input = document.getElementById('lock-input');
    if (input.value === 'elena2026') {
      document.getElementById('lock-screen').classList.add('hidden');
      sessionStorage.setItem('unlocked', '1');
    } else {
      input.classList.add('error');
      input.value = '';
      setTimeout(function() { input.classList.remove('error'); }, 500);
    }
  }
  if (sessionStorage.getItem('unlocked') === '1') {
    document.getElementById('lock-screen').classList.add('hidden');
  }
</script>

<div class="toggle-bar">
  <div class="toggle-bar-title">Estudio sobre el uso del móvil</div>
  <div class="toggle-bar-desc">Andel y Fuenllana · Alumnado y familias · Curso 2025–2026</div>
  <div class="toggle-controls">
    <a href="https://andel.es" target="_blank"><img src="andel.png" alt="Andel" class="toggle-logo"></a>
    <div class="toggle-group">
      <button class="toggle-btn" data-filter="Andel" onclick="setFilter('Andel')">
        <span class="toggle-dot" style="background: #060786;"></span>
        Andel
      </button>
    </div>
    <div class="toggle-center">
      <button class="toggle-btn active" data-filter="todos" onclick="setFilter('todos')">
        <span class="toggle-dot" style="background: #2a9d8f;"></span>
        General
      </button>
      <button class="toggle-btn" data-filter="ambos" onclick="setFilter('ambos')">
        <span class="toggle-dot" style="background: linear-gradient(135deg, #060786 50%, #c60027 50%);"></span>
        Comparar
      </button>
    </div>
    <div class="toggle-group">
      <button class="toggle-btn" data-filter="Fuenllana" onclick="setFilter('Fuenllana')">
        <span class="toggle-dot" style="background: #c60027;"></span>
        Fuenllana
      </button>
    </div>
    <a href="https://fuenllana.net" target="_blank"><img src="fuenllana.jpeg" alt="Fuenllana" class="toggle-logo"></a>
  </div>
</div>

<div class="page-content">
  
      <div class="section-header" id="s1">
        <div class="section-number">Sección 1</div>
        <div class="section-name">Acceso al primer móvil</div>
      </div>
      <section class="chart-section">
        <div class="chart-main">
          <div class="chart-title">¿Qué porcentaje del alumnado tiene móvil propio?</div>
          <div class="chart-subtitle">Porcentaje por curso y colegio</div>
          
          <div class="chart-container" id="pct_movil_curso" style="height:500px"></div>
          
        </div>
        <div class="chart-insight">
          <div class="insight-number" style="color: #c60027">17%</div>
          <div class="insight-label">más chicas que chicos con móvil en 3º° ESO</div>
        </div>
      </section>
      <section class="chart-section">
        <div class="chart-main">
          <div class="chart-title">¿En qué curso recibieron su primer móvil?</div>
          <div class="chart-subtitle">Distribución por curso entre el alumnado que ya tiene móvil propio</div>
          
          <div class="chart-container" id="edad_movil" style="height:500px"></div>
          
        </div>
        <div class="chart-insight">
          <div class="insight-number" style="color: #c60027">6%</div>
          <div class="insight-label">más chicas que chicos recibieron el móvil en 1°-2° ESO</div>
        </div>
      </section>
      <section class="chart-section">
        <div class="chart-main">
          <div class="chart-title">¿Qué tipo de dispositivo tienen?</div>
          <div class="chart-subtitle">Entre el alumnado que ya tiene móvil propio</div>
          
          <div class="chart-container" id="tipo_dispositivo" style="height:360px"></div>
          
        </div>
        <div class="chart-insight">
          <div class="insight-number" style="color: #c60027">4%</div>
          <div class="insight-label">más chicas con smartphone sin rrss</div>
        </div>
      </section>
      <section class="chart-section">
        <div class="chart-main">
          <div class="chart-title">¿Fue una decisión meditada?</div>
          <div class="chart-subtitle">Cómo describen las familias la decisión de dar el móvil</div>
          
          <div class="chart-container" id="decision_movil" style="height:340px"></div>
          
        </div>
        <div class="chart-insight">
          <div class="insight-number" style="color: #060786">5%</div>
          <div class="insight-label">más familias Andel dicen «meditada y consensuada»</div>
        </div>
      </section>
      <section class="chart-section">
        <div class="chart-main">
          <div class="chart-title">¿Conocían alternativas al smartphone?</div>
          <div class="chart-subtitle">Familias que ya dieron móvil: ¿valoraron opciones como móvil básico o reloj con GPS?</div>
          
          <div class="chart-container" id="alternativas" style="height:300px"></div>
          
        </div>
        <div class="chart-insight">
          <div class="insight-number" style="color: #c60027">3%</div>
          <div class="insight-label">más familias Fuenllana dicen «ni nos lo planteamos»</div>
        </div>
      </section>
      <section class="chart-section">
        <div class="chart-main">
          <div class="chart-title">¿Coinciden alumnado y familias en cuándo se dio el móvil?</div>
          <div class="chart-subtitle">Color sólido = lo que dice el alumnado · Color claro = lo que dicen las familias</div>
          
          <div class="chart-container" id="cruce_edad_movil" style="height:500px"></div>
          
        </div>
        <div class="chart-insight">
          <div class="insight-number" style="color: #c60027">6%</div>
          <div class="insight-label">más chicas que chicos dicen haber recibido el móvil en 1°-2° ESO</div>
        </div>
      </section>
</div>

<script>
  var allCharts = [];
  var allOriginals = [];
  
    (function() {
      var el = document.getElementById('pct_movil_curso');
      var chart = echarts.init(el, null, { renderer: 'svg' });
      var opt = {"tooltip": {"trigger": "axis", "axisPointer": {"type": "cross", "crossStyle": {"color": "#ccc"}, "lineStyle": {"color": "#ddd"}}, "backgroundColor": "rgba(255,255,255,0.96)", "borderColor": "#eee", "borderWidth": 1, "textStyle": {"fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "color": "#333333", "fontSize": 13}}, "legend": {"show": false}, "grid": {"left": 10, "right": 20, "top": 20, "bottom": 20, "containLabel": true}, "xAxis": {"type": "category", "data": ["4°° Pri", "5°° Pri", "6°° Pri", "1°° ESO", "2°° ESO", "3º° ESO", "4°° ESO", "1°° Bach", "2º° Bach"], "boundaryGap": false, "axisLabel": {"fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontSize": 13, "color": "#4a4a4a"}, "axisLine": {"show": false}, "axisTick": {"show": false}}, "yAxis": {"type": "value", "min": 0, "max": 100, "axisLabel": {"formatter": "{value}%", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontSize": 13, "color": "#888888"}, "splitLine": {"lineStyle": {"color": "#f0f0f0", "type": "dashed"}}, "axisLine": {"show": false}, "axisTick": {"show": false}}, "series": [{"name": "Todos", "type": "line", "data": [28.3, 23.2, 29.3, 44.7, 64.1, 80.0, 94.6, 96.5, 93.9], "symbol": "circle", "symbolSize": 10, "lineStyle": {"width": 3, "color": "#2a9d8f"}, "itemStyle": {"color": "#2a9d8f", "borderWidth": 2, "borderColor": "#fff"}, "label": {"show": true, "position": "top", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Andel", "type": "line", "data": [36.7, 25.8, 28.0, 46.7, 66.7, 70.7, 93.8, 96.6, 87.0], "symbol": "circle", "symbolSize": 10, "lineStyle": {"width": 3, "color": "#060786"}, "itemStyle": {"color": "#060786", "borderWidth": 2, "borderColor": "#fff"}, "label": {"show": true, "position": "top", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Fuenllana", "type": "line", "data": [21.8, 20.8, 30.9, 42.1, 62.1, 87.4, 95.2, 96.4, 100.0], "symbol": "circle", "symbolSize": 10, "lineStyle": {"width": 3, "color": "#c60027"}, "itemStyle": {"color": "#c60027", "borderWidth": 2, "borderColor": "#fff"}, "label": {"show": true, "position": "bottom", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}], "animationDuration": 800, "animationEasing": "cubicOut"};
      allOriginals.push(JSON.parse(JSON.stringify(opt)));
      chart.setOption(opt);
      allCharts.push(chart);
      window.addEventListener('resize', function() { chart.resize(); });
      
    })();
    (function() {
      var el = document.getElementById('edad_movil');
      var chart = echarts.init(el, null, { renderer: 'svg' });
      var opt = {"tooltip": {"trigger": "axis", "axisPointer": {"type": "shadow", "shadowStyle": {"color": "rgba(0,0,0,0.03)"}}, "backgroundColor": "rgba(255,255,255,0.96)", "borderColor": "#eee", "borderWidth": 1, "textStyle": {"fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "color": "#333333", "fontSize": 13}}, "legend": {"show": false}, "grid": {"left": 10, "right": 20, "top": 20, "bottom": 20, "containLabel": true}, "xAxis": {"type": "category", "data": ["1°-4° Primaria", "5°-6° Primaria", "1°-2° ESO", "3°-4° ESO", "Bachillerato"], "axisLabel": {"fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontSize": 13, "color": "#4a4a4a"}, "axisLine": {"show": false}, "axisTick": {"show": false}}, "yAxis": {"type": "value", "axisLabel": {"formatter": "{value}%", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontSize": 13, "color": "#888888"}, "splitLine": {"lineStyle": {"color": "#f0f0f0", "type": "dashed"}}, "axisLine": {"show": false}, "axisTick": {"show": false}}, "series": [{"name": "Todos", "type": "bar", "data": [16.2, 26.6, 41.4, 13.0, 2.8], "itemStyle": {"color": "#2a9d8f", "borderRadius": [6, 6, 6, 6]}, "barMaxWidth": 44, "label": {"show": true, "position": "top", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Andel", "type": "bar", "data": [17.5, 24.5, 38.0, 15.2, 4.8], "itemStyle": {"color": "#060786", "borderRadius": [6, 6, 6, 6]}, "barMaxWidth": 44, "label": {"show": true, "position": "top", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Fuenllana", "type": "bar", "data": [15.1, 28.4, 44.4, 11.1, 1.0], "itemStyle": {"color": "#c60027", "borderRadius": [6, 6, 6, 6]}, "barMaxWidth": 44, "label": {"show": true, "position": "top", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}], "animationDuration": 800, "animationEasing": "cubicOut"};
      allOriginals.push(JSON.parse(JSON.stringify(opt)));
      chart.setOption(opt);
      allCharts.push(chart);
      window.addEventListener('resize', function() { chart.resize(); });
      
    })();
    (function() {
      var el = document.getElementById('tipo_dispositivo');
      var chart = echarts.init(el, null, { renderer: 'svg' });
      var opt = {"tooltip": {"trigger": "axis", "axisPointer": {"type": "shadow", "shadowStyle": {"color": "rgba(0,0,0,0.03)"}}, "backgroundColor": "rgba(255,255,255,0.96)", "borderColor": "#eee", "borderWidth": 1, "textStyle": {"fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "color": "#333333", "fontSize": 13}}, "legend": {"show": false}, "grid": {"left": 10, "right": 60, "top": 10, "bottom": 10, "containLabel": true}, "yAxis": {"type": "category", "data": ["Smartphone sin control", "Smartphone con control parental", "Smartphone sin RRSS", "Móvil básico"], "inverse": true, "axisLabel": {"fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontSize": 13, "color": "#4a4a4a"}, "axisLine": {"show": false}, "axisTick": {"show": false}}, "xAxis": {"type": "value", "max": 60, "axisLabel": {"formatter": "{value}%", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontSize": 13, "color": "#888888"}, "splitLine": {"lineStyle": {"color": "#f0f0f0", "type": "dashed"}}, "axisLine": {"show": false}, "axisTick": {"show": false}}, "series": [{"name": "Todos", "type": "bar", "data": [47.3, 37.6, 11.4, 3.7], "itemStyle": {"color": "#2a9d8f", "borderRadius": [0, 6, 6, 0]}, "barMaxWidth": 36, "label": {"show": true, "position": "right", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Andel", "type": "bar", "data": [49.3, 37.7, 9.1, 4.0], "itemStyle": {"color": "#060786", "borderRadius": [0, 6, 6, 0]}, "barMaxWidth": 36, "label": {"show": true, "position": "right", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Fuenllana", "type": "bar", "data": [45.5, 37.6, 13.4, 3.5], "itemStyle": {"color": "#c60027", "borderRadius": [0, 6, 6, 0]}, "barMaxWidth": 36, "label": {"show": true, "position": "right", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}], "animationDuration": 800, "animationEasing": "cubicOut"};
      allOriginals.push(JSON.parse(JSON.stringify(opt)));
      chart.setOption(opt);
      allCharts.push(chart);
      window.addEventListener('resize', function() { chart.resize(); });
      
    })();
    (function() {
      var el = document.getElementById('decision_movil');
      var chart = echarts.init(el, null, { renderer: 'svg' });
      var opt = {"tooltip": {"trigger": "axis", "axisPointer": {"type": "shadow", "shadowStyle": {"color": "rgba(0,0,0,0.03)"}}, "backgroundColor": "rgba(255,255,255,0.96)", "borderColor": "#eee", "borderWidth": 1, "textStyle": {"fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "color": "#333333", "fontSize": 13}}, "legend": {"show": false}, "grid": {"left": 10, "right": 60, "top": 10, "bottom": 10, "containLabel": true}, "yAxis": {"type": "category", "data": ["Meditada y consensuada", "Reactiva", "Poco pensada", "Fue un regalo"], "inverse": true, "axisLabel": {"fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontSize": 13, "color": "#4a4a4a"}, "axisLine": {"show": false}, "axisTick": {"show": false}}, "xAxis": {"type": "value", "axisLabel": {"formatter": "{value}%", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontSize": 13, "color": "#888888"}, "splitLine": {"lineStyle": {"color": "#f0f0f0", "type": "dashed"}}, "axisLine": {"show": false}, "axisTick": {"show": false}}, "series": [{"name": "Todos", "type": "bar", "data": [59.7, 32.9, 2.7, 4.7], "itemStyle": {"color": "#2a9d8f", "borderRadius": [0, 6, 6, 0]}, "barMaxWidth": 36, "label": {"show": true, "position": "right", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Andel", "type": "bar", "data": [62.2, 32.2, 1.4, 4.2], "itemStyle": {"color": "#060786", "borderRadius": [0, 6, 6, 0]}, "barMaxWidth": 36, "label": {"show": true, "position": "right", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Fuenllana", "type": "bar", "data": [57.4, 33.5, 3.9, 5.2], "itemStyle": {"color": "#c60027", "borderRadius": [0, 6, 6, 0]}, "barMaxWidth": 36, "label": {"show": true, "position": "right", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}], "animationDuration": 800, "animationEasing": "cubicOut"};
      allOriginals.push(JSON.parse(JSON.stringify(opt)));
      chart.setOption(opt);
      allCharts.push(chart);
      window.addEventListener('resize', function() { chart.resize(); });
      
    })();
    (function() {
      var el = document.getElementById('alternativas');
      var chart = echarts.init(el, null, { renderer: 'svg' });
      var opt = {"tooltip": {"trigger": "axis", "axisPointer": {"type": "shadow", "shadowStyle": {"color": "rgba(0,0,0,0.03)"}}, "backgroundColor": "rgba(255,255,255,0.96)", "borderColor": "#eee", "borderWidth": 1, "textStyle": {"fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "color": "#333333", "fontSize": 13}}, "legend": {"show": false}, "grid": {"left": 10, "right": 60, "top": 10, "bottom": 10, "containLabel": true}, "yAxis": {"type": "category", "data": ["Sí, las valoramos", "Las conocíamos, no las consideramos", "Ni nos lo planteamos"], "inverse": true, "axisLabel": {"fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontSize": 13, "color": "#4a4a4a", "width": 260, "overflow": "truncate"}, "axisLine": {"show": false}, "axisTick": {"show": false}}, "xAxis": {"type": "value", "axisLabel": {"formatter": "{value}%", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontSize": 13, "color": "#888888"}, "splitLine": {"lineStyle": {"color": "#f0f0f0", "type": "dashed"}}, "axisLine": {"show": false}, "axisTick": {"show": false}}, "series": [{"name": "Todos", "type": "bar", "data": [53.2, 28.8, 18.1], "itemStyle": {"color": "#2a9d8f", "borderRadius": [0, 6, 6, 0]}, "barMaxWidth": 36, "label": {"show": true, "position": "right", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Andel", "type": "bar", "data": [54.2, 29.2, 16.7], "itemStyle": {"color": "#060786", "borderRadius": [0, 6, 6, 0]}, "barMaxWidth": 36, "label": {"show": true, "position": "right", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Fuenllana", "type": "bar", "data": [52.3, 28.4, 19.4], "itemStyle": {"color": "#c60027", "borderRadius": [0, 6, 6, 0]}, "barMaxWidth": 36, "label": {"show": true, "position": "right", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}], "animationDuration": 800, "animationEasing": "cubicOut"};
      allOriginals.push(JSON.parse(JSON.stringify(opt)));
      chart.setOption(opt);
      allCharts.push(chart);
      window.addEventListener('resize', function() { chart.resize(); });
      
    })();
    (function() {
      var el = document.getElementById('cruce_edad_movil');
      var chart = echarts.init(el, null, { renderer: 'svg' });
      var opt = {"tooltip": {"trigger": "axis", "axisPointer": {"type": "shadow", "shadowStyle": {"color": "rgba(0,0,0,0.03)"}}, "backgroundColor": "rgba(255,255,255,0.96)", "borderColor": "#eee", "borderWidth": 1, "textStyle": {"fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "color": "#333333", "fontSize": 13}, "formatter": function(params) {
      var tip = '<b>' + params[0].axisValueLabel + '</b>';
      for (var i = 0; i < params.length; i++) {
        var p = params[i];
        var label = p.seriesName.indexOf('_fam') > -1 ? 'Familias' : 'Alumnado';
        var school = p.seriesName.replace('_fam', '');
        if (school !== 'Todos') label = school + ' — ' + label;
        tip += '<br/>' + p.marker + ' ' + label + ': <b>' + p.value + '%</b>';
      }
      return tip;
    }}, "legend": {"show": false}, "grid": {"left": 10, "right": 20, "top": 20, "bottom": 20, "containLabel": true}, "xAxis": {"type": "category", "data": ["1°-4° Primaria", "5°-6° Primaria", "1°-2° ESO", "3°-4° ESO", "Bachillerato"], "axisLabel": {"fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontSize": 13, "color": "#4a4a4a"}, "axisLine": {"show": false}, "axisTick": {"show": false}}, "yAxis": {"type": "value", "axisLabel": {"formatter": "{value}%", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontSize": 13, "color": "#888888"}, "splitLine": {"lineStyle": {"color": "#f0f0f0", "type": "dashed"}}, "axisLine": {"show": false}, "axisTick": {"show": false}}, "series": [{"name": "Todos", "type": "bar", "data": [16.2, 26.6, 41.4, 13.0, 2.8], "itemStyle": {"color": "#2a9d8f", "borderRadius": [6, 6, 6, 6]}, "barMaxWidth": 38, "label": {"show": true, "position": "top", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Todos_fam", "type": "bar", "data": [5.4, 12.7, 49.5, 26.4, 6.0], "itemStyle": {"color": "rgba(42, 157, 143, 0.35)", "borderRadius": [6, 6, 6, 6]}, "barMaxWidth": 38, "label": {"show": true, "position": "top", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Andel", "type": "bar", "data": [17.5, 24.5, 38.0, 15.2, 4.8], "itemStyle": {"color": "#060786", "borderRadius": [6, 6, 6, 6]}, "barMaxWidth": 38, "label": {"show": true, "position": "top", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Andel_fam", "type": "bar", "data": [4.2, 12.5, 43.8, 31.2, 8.3], "itemStyle": {"color": "rgba(6, 7, 134, 0.35)", "borderRadius": [6, 6, 6, 6]}, "barMaxWidth": 38, "label": {"show": true, "position": "top", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Fuenllana", "type": "bar", "data": [15.1, 28.4, 44.4, 11.1, 1.0], "itemStyle": {"color": "#c60027", "borderRadius": [6, 6, 6, 6]}, "barMaxWidth": 38, "label": {"show": true, "position": "top", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}, {"name": "Fuenllana_fam", "type": "bar", "data": [6.5, 12.9, 54.8, 21.9, 3.9], "itemStyle": {"color": "rgba(198, 0, 39, 0.35)", "borderRadius": [6, 6, 6, 6]}, "barMaxWidth": 38, "label": {"show": true, "position": "top", "formatter": "{c}%", "fontSize": 14, "color": "#3a3a3a", "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif", "fontWeight": 600}}], "animationDuration": 800, "animationEasing": "cubicOut"};
      allOriginals.push(JSON.parse(JSON.stringify(opt)));
      chart.setOption(opt);
      allCharts.push(chart);
      window.addEventListener('resize', function() { chart.resize(); });
      
    })();

  function shouldShow(name, mode) {
    var isTodos = name.indexOf('Todos') === 0;
    var isAndel = name.indexOf('Andel') === 0;
    var isFuenllana = name.indexOf('Fuenllana') === 0;
    if (mode === 'todos') return isTodos;
    if (mode === 'ambos') return isAndel || isFuenllana;
    if (mode === 'Andel') return isAndel;
    if (mode === 'Fuenllana') return isFuenllana;
    return false;
  }

  var LABEL_DEFAULT = '#3a3a3a';
  var COLOR_ANDEL = '#060786';
  var COLOR_FUENLLANA = '#c60027';

  function setFilter(mode) {
    document.querySelectorAll('.toggle-btn').forEach(function(btn) {
      btn.classList.toggle('active', btn.dataset.filter === mode);
    });
    document.querySelectorAll('.chart-insight').forEach(function(el) {
      el.classList.toggle('visible', mode === 'ambos');
    });
    allCharts.forEach(function(chart, idx) {
      var opt = chart.getOption();
      var seriesUpdate = [];
      opt.series.forEach(function(s) {
        var lc = LABEL_DEFAULT;
        if (mode === 'ambos') {
          if (s.name.indexOf('Andel') === 0) lc = COLOR_ANDEL;
          else if (s.name.indexOf('Fuenllana') === 0) lc = COLOR_FUENLLANA;
        }
        seriesUpdate.push({ label: { color: lc } });
      });
      chart.setOption({ series: seriesUpdate });
      var names = opt.series.map(function(s) { return s.name; });
      names.forEach(function(name) {
        chart.dispatchAction({ type: shouldShow(name, mode) ? 'legendSelect' : 'legendUnSelect', name: name });
      });
    });
  }
  setFilter('todos');
</script>
</body>
</html>