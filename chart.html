<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,700;1,9..40,400&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
<style>

  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'DM Sans', 'Inter', system-ui, -apple-system, sans-serif;
    background: #ffffff;
    color: #333333;
    overflow-x: hidden;
  }

  .toggle-bar {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(255,255,255,0.92);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid #eee;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    padding: 14px 20px;
  }
  .toggle-bar-title {
    font-size: 28px;
    font-weight: 700;
    color: #333333;
    letter-spacing: -0.3px;
  }
  .toggle-bar-desc {
    font-size: 15px;
    font-weight: 400;
    color: #888888;
    margin-top: -4px;
  }
  .toggle-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 12px;
  }
  .toggle-group {
    display: flex;
    gap: 4px;
    background: #f7f7f7;
    border-radius: 12px;
    padding: 5px;
  }
  .toggle-center {
    display: flex;
    flex-direction: column;
    gap: 4px;
    background: #f7f7f7;
    border-radius: 12px;
    padding: 5px;
  }
  .toggle-btn {
    border: none;
    background: transparent;
    font-family: 'DM Sans', 'Inter', system-ui, -apple-system, sans-serif;
    font-size: 15px;
    font-weight: 500;
    color: #888888;
    padding: 10px 24px;
    border-radius: 9px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 9px;
  }
  .toggle-btn:hover {
    color: #4a4a4a;
  }
  .toggle-btn.active {
    background: #ffffff;
    box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    color: #333333;
    font-weight: 600;
  }
  .toggle-btn[data-filter="Andel"].active {
    background: rgba(6,7,134,0.09);
    color: #060786;
    box-shadow: 0 1px 4px rgba(6,7,134,0.15);
  }
  .toggle-btn[data-filter="Fuenllana"].active {
    background: rgba(198,0,39,0.09);
    color: #c60027;
    box-shadow: 0 1px 4px rgba(198,0,39,0.15);
  }
  .toggle-dot {
    width: 11px;
    height: 11px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  .toggle-logo {
    height: 72px;
    object-fit: contain;
    opacity: 0.7;
    transition: opacity 0.2s;
  }
  .toggle-logo:hover {
    opacity: 1;
  }

  .color-legend {
    display: flex;
    gap: 20px;
    margin-top: 4px;
  }
  .color-legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 14px;
    color: #4a4a4a;
  }
  .color-legend-swatch {
    width: 14px;
    height: 14px;
    border-radius: 4px;
    flex-shrink: 0;
  }

  .page-content {
    max-width: 940px;
    margin: 0 auto;
    padding: 40px 20px 80px;
  }

  .page-header {
    text-align: center;
    margin-bottom: 56px;
  }

  .section-header {
    margin-top: 64px;
    margin-bottom: 0;
    padding: 16px 0;
    border-bottom: 2px solid #f0f0f0;
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: border-color 0.2s;
  }
  .section-header:hover {
    border-bottom-color: #ccc;
  }
  .section-header:first-child {
    margin-top: 0;
  }
  .section-info {
  }
  .section-number {
    font-size: 13px;
    font-weight: 600;
    color: #888888;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 6px;
  }
  .section-name {
    font-size: 32px;
    font-weight: 700;
    color: #333333;
    line-height: 1.2;
  }
  .section-arrow {
    font-size: 28px;
    font-weight: 300;
    color: #888888;
    transition: transform 0.3s ease;
    flex-shrink: 0;
    margin-left: 16px;
  }
  .section-header.expanded .section-arrow {
    transform: rotate(90deg);
  }
  .section-content {
    display: none;
    padding-top: 40px;
        transition: opacity 0.25s ease;
  }
  .section-content.expanded {
    display: block;
  }

  .chart-section {
    position: relative;
    margin-bottom: 56px;
  }
  .chart-main {
  }
  .chart-code {
    font-size: 13px;
    font-weight: 600;
    color: #888888;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
  }
  .chart-title {
    font-size: 28px;
    font-weight: 700;
    color: #333333;
    line-height: 1.3;
    margin-bottom: 6px;
  }
  .chart-subtitle {
    font-size: 18px;
    font-weight: 400;
    color: #4a4a4a;
    line-height: 1.4;
    margin-bottom: 24px;
  }
  .chart-container {
    width: 100%;
    height: 500px;
  }
  .chart-footnote {
    font-size: 11px;
    color: #888888;
    margin-top: 16px;
    line-height: 1.5;
  }
  .chart-comment {
    position: absolute;
    left: -280px;
    top: 50%;
    transform: translateY(-50%);
    width: 260px;
    font-size: 22px;
    color: #2a9d8f;
    line-height: 1.4;
    text-align: center;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .chart-comment p {
    margin: 0;
  }

  .chart-insight {
    position: absolute;
    right: -240px;
    top: 50%;
    transform: translateY(-50%) translateX(12px);
    width: 210px;
    text-align: center;
    opacity: 0;
    transition: all 0.4s ease;
    pointer-events: none;
  }
  .chart-insight.visible {
    opacity: 1;
    transform: translateY(-50%) translateX(0);
    pointer-events: auto;
  }
  .insight-block {
    margin-bottom: 18px;
  }
  .insight-block:last-child {
    margin-bottom: 0;
  }
  .insight-number {
    font-size: 46px;
    font-weight: 700;
    line-height: 1;
    margin-bottom: 8px;
  }
  .insight-label {
    font-size: 14px;
    color: #4a4a4a;
    line-height: 1.4;
  }

  .coming-soon {
    margin-top: 80px;
    padding-top: 48px;
    border-top: 2px solid #f0f0f0;
  }
  .coming-soon-title {
    font-size: 36px;
    font-weight: 700;
    color: #333333;
    margin-bottom: 4px;
  }
  .coming-soon-subtitle {
    font-size: 16px;
    color: #888888;
    margin-bottom: 36px;
  }
  .coming-section {
    margin-bottom: 28px;
  }
  .coming-section-name {
    font-size: 18px;
    font-weight: 700;
    color: #333333;
    margin-bottom: 8px;
  }
  .coming-section ul {
    list-style: none;
    padding-left: 0;
  }
  .coming-section li {
    font-size: 15px;
    color: #4a4a4a;
    padding: 4px 0 4px 20px;
    position: relative;
    line-height: 1.5;
  }
  .coming-section li::before {
    content: '·';
    position: absolute;
    left: 4px;
    color: #888888;
    font-weight: 700;
    font-size: 20px;
    line-height: 1.3;
  }


</style>
</head>
<body>

<div class="toggle-bar">
  <div class="toggle-controls">
    <div class="toggle-group">
      <button class="toggle-btn" data-filter="Andel" onclick="setFilter('Andel')">
        <span class="toggle-dot" style="background: #060786;"></span>
        Andel
      </button>
    </div>
    <div class="toggle-center">
      <button class="toggle-btn active" data-filter="todos" onclick="setFilter('todos')">
        <span class="toggle-dot" style="background: #2a9d8f;"></span>
        General
      </button>
      <button class="toggle-btn" data-filter="ambos" onclick="setFilter('ambos')">
        <span class="toggle-dot" style="background: linear-gradient(135deg, #060786 50%, #c60027 50%);"></span>
        Comparar
      </button>
    </div>
    <div class="toggle-group">
      <button class="toggle-btn" data-filter="Fuenllana" onclick="setFilter('Fuenllana')">
        <span class="toggle-dot" style="background: #c60027;"></span>
        Fuenllana
      </button>
    </div>
  </div>
</div>

<div class="page-content">
  <section class="chart-section">
    <div class="chart-main">
      <div class="chart-title">¿Están preparados los profesores para acompañar digitalmente?</div>
      <div class="chart-subtitle">Valoración de su formación actual y ámbitos en los que quieren formarse</div>
      <div class="chart-container" id="chart" style="height:460px"></div>
      
    </div>
  </section>
</div>

<script>
  var allCharts = [];
  var allOriginals = [];
  (function() {
      var el = document.getElementById('chart');
      var chart = echarts.init(el, null, { renderer: 'svg' });
      var opt = {
  "tooltip": {
    "trigger": "item",
    "backgroundColor": "rgba(255,255,255,0.96)",
    "borderColor": "#eee",
    "borderWidth": 1,
    "textStyle": {
      "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
      "color": "#333333",
      "fontSize": 13
    },
    "formatter": function(p) {
          var parts = p.seriesName.split('_');
          var seg = parts.slice(1).join('_');
          if (seg === 'ranking') return '<b>' + p.name + '</b>: <b>' + p.value + '%</b>';
          return '<b>' + seg + '</b>: <b>' + p.value + '%</b>';
        }
  },
  "legend": {
    "show": false,
    "selected": {
      "Todos_Poco formado": true,
      "Todos_Básica pero insuficiente": true,
      "Todos_Bien formado": true,
      "Andel_Poco formado": false,
      "Andel_Básica pero insuficiente": false,
      "Andel_Bien formado": false,
      "Fuenllana_Poco formado": false,
      "Fuenllana_Básica pero insuficiente": false,
      "Fuenllana_Bien formado": false,
      "Todos_ranking": true,
      "Andel_ranking": false,
      "Fuenllana_ranking": false
    }
  },
  "graphic": [
    {
      "type": "rect",
      "left": 0,
      "top": 8,
      "shape": {
        "width": 16,
        "height": 16,
        "r": 3
      },
      "style": {
        "fill": "#e76f51"
      }
    },
    {
      "type": "text",
      "left": 22,
      "top": 9,
      "style": {
        "text": "Poco formado",
        "fontSize": 12,
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fill": "#4a4a4a"
      }
    },
    {
      "type": "rect",
      "left": 118.0,
      "top": 8,
      "shape": {
        "width": 16,
        "height": 16,
        "r": 3
      },
      "style": {
        "fill": "#e8963e"
      }
    },
    {
      "type": "text",
      "left": 140.0,
      "top": 9,
      "style": {
        "text": "Básica pero insuficiente",
        "fontSize": 12,
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fill": "#4a4a4a"
      }
    },
    {
      "type": "rect",
      "left": 314.0,
      "top": 8,
      "shape": {
        "width": 16,
        "height": 16,
        "r": 3
      },
      "style": {
        "fill": "#2a9d8f"
      }
    },
    {
      "type": "text",
      "left": 336.0,
      "top": 9,
      "style": {
        "text": "Bien formado",
        "fontSize": 12,
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fill": "#4a4a4a"
      }
    },
    {
      "type": "text",
      "left": 0,
      "top": 105,
      "style": {
        "text": "¿En qué ámbitos quieren formarse?",
        "fontSize": 14,
        "fontWeight": "bold",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fill": "#333333"
      }
    }
  ],
  "grid": [
    {
      "left": 10,
      "right": 0,
      "top": 40,
      "bottom": 370,
      "containLabel": true
    },
    {
      "left": 10,
      "right": 60,
      "top": 130,
      "bottom": 10,
      "containLabel": true
    }
  ],
  "yAxis": [
    {
      "type": "category",
      "gridIndex": 0,
      "data": [
        "Valoración"
      ],
      "axisLabel": {
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fontSize": 14,
        "color": "#4a4a4a"
      },
      "axisLine": {
        "show": false
      },
      "axisTick": {
        "show": false
      }
    },
    {
      "type": "category",
      "gridIndex": 1,
      "data": [
        "Videojuegos y comunidades",
        "Riesgos digitales",
        "Privacidad y control parental",
        "RRSS y dinámicas adolescentes",
        "Uso educativo equilibrado"
      ],
      "axisLabel": {
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fontSize": 13,
        "color": "#4a4a4a",
        "width": 200,
        "overflow": "break"
      },
      "axisLine": {
        "show": false
      },
      "axisTick": {
        "show": false
      }
    }
  ],
  "xAxis": [
    {
      "type": "value",
      "gridIndex": 0,
      "max": 100,
      "axisLabel": {
        "show": false
      },
      "splitLine": {
        "show": false
      },
      "axisLine": {
        "show": false
      },
      "axisTick": {
        "show": false
      }
    },
    {
      "type": "value",
      "gridIndex": 1,
      "max": 100,
      "axisLabel": {
        "formatter": "{value}%",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fontSize": 13,
        "color": "#888888"
      },
      "splitLine": {
        "lineStyle": {
          "color": "#f0f0f0",
          "type": "dashed"
        }
      },
      "axisLine": {
        "show": false
      },
      "axisTick": {
        "show": false
      }
    }
  ],
  "series": [
    {
      "name": "Todos_Poco formado",
      "type": "bar",
      "stack": "Todos",
      "xAxisIndex": 0,
      "yAxisIndex": 0,
      "data": [
        7.8
      ],
      "itemStyle": {
        "color": "#e76f51",
        "borderRadius": [
          4,
          0,
          0,
          4
        ]
      },
      "barMaxWidth": 48,
      "label": {
        "show": true,
        "position": "inside",
        "formatter": function(p) { return p.data >= 5 ? p.data + '%' : ''; },
        "fontSize": 13,
        "fontWeight": "bold",
        "color": "#fff",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif"
      }
    },
    {
      "name": "Todos_Básica pero insuficiente",
      "type": "bar",
      "stack": "Todos",
      "xAxisIndex": 0,
      "yAxisIndex": 0,
      "data": [
        49.5
      ],
      "itemStyle": {
        "color": "#e8963e",
        "borderRadius": [
          0,
          0,
          0,
          0
        ]
      },
      "barMaxWidth": 48,
      "label": {
        "show": true,
        "position": "inside",
        "formatter": function(p) { return p.data >= 5 ? p.data + '%' : ''; },
        "fontSize": 13,
        "fontWeight": "bold",
        "color": "#fff",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif"
      }
    },
    {
      "name": "Todos_Bien formado",
      "type": "bar",
      "stack": "Todos",
      "xAxisIndex": 0,
      "yAxisIndex": 0,
      "data": [
        42.7
      ],
      "itemStyle": {
        "color": "#2a9d8f",
        "borderRadius": [
          0,
          4,
          4,
          0
        ]
      },
      "barMaxWidth": 48,
      "label": {
        "show": true,
        "position": "inside",
        "formatter": function(p) { return p.data >= 5 ? p.data + '%' : ''; },
        "fontSize": 13,
        "fontWeight": "bold",
        "color": "#fff",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif"
      }
    },
    {
      "name": "Andel_Poco formado",
      "type": "bar",
      "stack": "Andel",
      "xAxisIndex": 0,
      "yAxisIndex": 0,
      "data": [
        10.9
      ],
      "itemStyle": {
        "color": "#e76f51",
        "borderRadius": [
          4,
          0,
          0,
          4
        ]
      },
      "barMaxWidth": 48,
      "label": {
        "show": true,
        "position": "inside",
        "formatter": function(p) { return p.data >= 5 ? p.data + '%' : ''; },
        "fontSize": 13,
        "fontWeight": "bold",
        "color": "#fff",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif"
      }
    },
    {
      "name": "Andel_Básica pero insuficiente",
      "type": "bar",
      "stack": "Andel",
      "xAxisIndex": 0,
      "yAxisIndex": 0,
      "data": [
        32.6
      ],
      "itemStyle": {
        "color": "#e8963e",
        "borderRadius": [
          0,
          0,
          0,
          0
        ]
      },
      "barMaxWidth": 48,
      "label": {
        "show": true,
        "position": "inside",
        "formatter": function(p) { return p.data >= 5 ? p.data + '%' : ''; },
        "fontSize": 13,
        "fontWeight": "bold",
        "color": "#fff",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif"
      }
    },
    {
      "name": "Andel_Bien formado",
      "type": "bar",
      "stack": "Andel",
      "xAxisIndex": 0,
      "yAxisIndex": 0,
      "data": [
        56.5
      ],
      "itemStyle": {
        "color": "#2a9d8f",
        "borderRadius": [
          0,
          4,
          4,
          0
        ]
      },
      "barMaxWidth": 48,
      "label": {
        "show": true,
        "position": "inside",
        "formatter": function(p) { return p.data >= 5 ? p.data + '%' : ''; },
        "fontSize": 13,
        "fontWeight": "bold",
        "color": "#fff",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif"
      }
    },
    {
      "name": "Fuenllana_Poco formado",
      "type": "bar",
      "stack": "Fuenllana",
      "xAxisIndex": 0,
      "yAxisIndex": 0,
      "data": [
        5.3
      ],
      "itemStyle": {
        "color": "#e76f51",
        "borderRadius": [
          4,
          0,
          0,
          4
        ]
      },
      "barMaxWidth": 48,
      "label": {
        "show": true,
        "position": "inside",
        "formatter": function(p) { return p.data >= 5 ? p.data + '%' : ''; },
        "fontSize": 13,
        "fontWeight": "bold",
        "color": "#fff",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif"
      }
    },
    {
      "name": "Fuenllana_Básica pero insuficiente",
      "type": "bar",
      "stack": "Fuenllana",
      "xAxisIndex": 0,
      "yAxisIndex": 0,
      "data": [
        63.2
      ],
      "itemStyle": {
        "color": "#e8963e",
        "borderRadius": [
          0,
          0,
          0,
          0
        ]
      },
      "barMaxWidth": 48,
      "label": {
        "show": true,
        "position": "inside",
        "formatter": function(p) { return p.data >= 5 ? p.data + '%' : ''; },
        "fontSize": 13,
        "fontWeight": "bold",
        "color": "#fff",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif"
      }
    },
    {
      "name": "Fuenllana_Bien formado",
      "type": "bar",
      "stack": "Fuenllana",
      "xAxisIndex": 0,
      "yAxisIndex": 0,
      "data": [
        31.6
      ],
      "itemStyle": {
        "color": "#2a9d8f",
        "borderRadius": [
          0,
          4,
          4,
          0
        ]
      },
      "barMaxWidth": 48,
      "label": {
        "show": true,
        "position": "inside",
        "formatter": function(p) { return p.data >= 5 ? p.data + '%' : ''; },
        "fontSize": 13,
        "fontWeight": "bold",
        "color": "#fff",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif"
      }
    },
    {
      "name": "Todos_ranking",
      "type": "bar",
      "xAxisIndex": 1,
      "yAxisIndex": 1,
      "data": [
        36.0,
        45.0,
        48.0,
        51.0,
        62.0
      ],
      "itemStyle": {
        "color": "#2a9d8f",
        "borderRadius": [
          0,
          6,
          6,
          0
        ]
      },
      "barMaxWidth": 10,
      "label": {
        "show": true,
        "position": "right",
        "formatter": "{c}%",
        "fontSize": 14,
        "color": "#3a3a3a",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fontWeight": 600
      }
    },
    {
      "name": "Andel_ranking",
      "type": "bar",
      "xAxisIndex": 1,
      "yAxisIndex": 1,
      "data": [
        37.0,
        41.3,
        43.5,
        45.7,
        56.5
      ],
      "itemStyle": {
        "color": "#060786",
        "borderRadius": [
          0,
          6,
          6,
          0
        ]
      },
      "barMaxWidth": 10,
      "label": {
        "show": true,
        "position": "right",
        "formatter": "{c}%",
        "fontSize": 14,
        "color": "#3a3a3a",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fontWeight": 600
      }
    },
    {
      "name": "Fuenllana_ranking",
      "type": "bar",
      "xAxisIndex": 1,
      "yAxisIndex": 1,
      "data": [
        35.2,
        48.1,
        51.9,
        55.6,
        66.7
      ],
      "itemStyle": {
        "color": "#c60027",
        "borderRadius": [
          0,
          6,
          6,
          0
        ]
      },
      "barMaxWidth": 10,
      "label": {
        "show": true,
        "position": "right",
        "formatter": "{c}%",
        "fontSize": 14,
        "color": "#3a3a3a",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fontWeight": 600
      }
    }
  ],
  "animationDuration": 800,
  "animationEasing": "cubicOut"
};
      allOriginals.push(JSON.parse(JSON.stringify(opt)));
      chart.setOption(opt);
      allCharts.push(chart);
      chart._el = el;
      window.addEventListener('resize', function() { chart.resize(); });
      chart._howCompare = 'default';
  })();

  var LABEL_DEFAULT = '#3a3a3a';
  var COLOR_ANDEL = '#060786';
  var COLOR_FUENLLANA = '#c60027';

  
function shouldShow(name, mode) {
  var isTodos = name.indexOf('Todos') === 0;
  var isAndel = name.indexOf('Andel') === 0;
  var isFuenllana = name.indexOf('Fuenllana') === 0;
  if (mode === 'todos') return isTodos;
  if (mode === 'ambos') return isAndel || isFuenllana;
  if (mode === 'Andel') return isAndel;
  if (mode === 'Fuenllana') return isFuenllana;
  return false;
}

function applyFilter(mode) {
  document.querySelectorAll('.school-block').forEach(function(el) {
    var s = el.dataset.school;
    var show = (mode === 'todos' && s === 'todos') ||
               (mode === 'Andel' && s === 'Andel') ||
               (mode === 'Fuenllana' && s === 'Fuenllana') ||
               (mode === 'ambos' && (s === 'Andel' || s === 'Fuenllana'));
    el.style.display = show ? '' : 'none';
  });
  allCharts.forEach(function(chart, idx) {
    var section = chart._el ? chart._el.closest('.chart-section') : null;
    if (chart._howCompare === 'sideBySide' && chart._compareFn) {
      chart._compareFn(mode);
    }
    if (section && section.style.display === 'none') return;
    var content = chart._el ? chart._el.closest('.section-content') : null;
    if (content && !content.classList.contains('expanded')) return;
    if (section) section.style.display = '';
    var insightEl = section ? section.querySelector('.chart-insight') : null;
    if (insightEl) {
      insightEl.classList.toggle('visible', mode === 'ambos');
    }
    var opt = chart.getOption();
    var seriesUpdate = [];
    opt.series.forEach(function(s) {
      var lc = LABEL_DEFAULT;
      if (mode === 'ambos') {
        if (s.name.indexOf('Andel') === 0) lc = COLOR_ANDEL;
        else if (s.name.indexOf('Fuenllana') === 0) lc = COLOR_FUENLLANA;
      }
      seriesUpdate.push({ label: { color: lc } });
    });
    chart.setOption({ series: seriesUpdate });
    var names = opt.series.map(function(s) { return s.name; });
    names.forEach(function(name) {
      chart.dispatchAction({ type: shouldShow(name, mode) ? 'legendSelect' : 'legendUnSelect', name: name });
    });
  });
}

var _currentMode = null;
function setFilter(mode) {
  document.querySelectorAll('.toggle-btn').forEach(function(btn) {
    btn.classList.toggle('active', btn.dataset.filter === mode);
  });
  _currentMode = mode;
  applyFilter(mode);
}


  setFilter('todos');
</script>
</body>
</html>