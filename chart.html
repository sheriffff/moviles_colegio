<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,700;1,9..40,400&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
<style>

  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'DM Sans', 'Inter', system-ui, -apple-system, sans-serif;
    background: #ffffff;
    color: #333333;
    overflow-x: hidden;
  }

  .toggle-bar {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(255,255,255,0.92);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid #eee;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    padding: 14px 20px;
  }
  .toggle-bar-title {
    font-size: 28px;
    font-weight: 700;
    color: #333333;
    letter-spacing: -0.3px;
  }
  .toggle-bar-desc {
    font-size: 15px;
    font-weight: 400;
    color: #888888;
    margin-top: -4px;
  }
  .toggle-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 12px;
  }
  .toggle-group {
    display: flex;
    gap: 4px;
    background: #f7f7f7;
    border-radius: 12px;
    padding: 5px;
  }
  .toggle-center {
    display: flex;
    flex-direction: column;
    gap: 4px;
    background: #f7f7f7;
    border-radius: 12px;
    padding: 5px;
  }
  .toggle-btn {
    border: none;
    background: transparent;
    font-family: 'DM Sans', 'Inter', system-ui, -apple-system, sans-serif;
    font-size: 15px;
    font-weight: 500;
    color: #888888;
    padding: 10px 24px;
    border-radius: 9px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 9px;
  }
  .toggle-btn:hover {
    color: #4a4a4a;
  }
  .toggle-btn.active {
    background: #ffffff;
    box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    color: #333333;
    font-weight: 600;
  }
  .toggle-btn[data-filter="Andel"].active {
    background: rgba(6,7,134,0.09);
    color: #060786;
    box-shadow: 0 1px 4px rgba(6,7,134,0.15);
  }
  .toggle-btn[data-filter="Fuenllana"].active {
    background: rgba(198,0,39,0.09);
    color: #c60027;
    box-shadow: 0 1px 4px rgba(198,0,39,0.15);
  }
  .toggle-dot {
    width: 11px;
    height: 11px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  .toggle-logo {
    height: 72px;
    object-fit: contain;
    opacity: 0.7;
    transition: opacity 0.2s;
  }
  .toggle-logo:hover {
    opacity: 1;
  }

  .color-legend {
    display: flex;
    gap: 20px;
    margin-top: 4px;
  }
  .color-legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 14px;
    color: #4a4a4a;
  }
  .color-legend-swatch {
    width: 14px;
    height: 14px;
    border-radius: 4px;
    flex-shrink: 0;
  }

  .page-content {
    max-width: 940px;
    margin: 0 auto;
    padding: 40px 20px 80px;
  }

  .page-header {
    text-align: center;
    margin-bottom: 56px;
  }

  .section-header {
    margin-top: 64px;
    margin-bottom: 0;
    padding: 16px 0;
    border-bottom: 2px solid #f0f0f0;
    cursor: pointer;
    user-select: none;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: border-color 0.2s;
  }
  .section-header:hover {
    border-bottom-color: #ccc;
  }
  .section-header:first-child {
    margin-top: 0;
  }
  .section-info {
  }
  .section-number {
    font-size: 13px;
    font-weight: 600;
    color: #888888;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 6px;
  }
  .section-name {
    font-size: 32px;
    font-weight: 700;
    color: #333333;
    line-height: 1.2;
  }
  .section-arrow {
    font-size: 28px;
    font-weight: 300;
    color: #888888;
    transition: transform 0.3s ease;
    flex-shrink: 0;
    margin-left: 16px;
  }
  .section-header.expanded .section-arrow {
    transform: rotate(90deg);
  }
  .section-content {
    display: none;
    padding-top: 40px;
        transition: opacity 0.25s ease;
  }
  .section-content.expanded {
    display: block;
  }

  .chart-section {
    position: relative;
    margin-bottom: 56px;
  }
  .chart-main {
  }
  .chart-code {
    font-size: 13px;
    font-weight: 600;
    color: #888888;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
  }
  .chart-title {
    font-size: 28px;
    font-weight: 700;
    color: #333333;
    line-height: 1.3;
    margin-bottom: 6px;
  }
  .chart-subtitle {
    font-size: 18px;
    font-weight: 400;
    color: #4a4a4a;
    line-height: 1.4;
    margin-bottom: 24px;
  }
  .chart-container {
    width: 100%;
    height: 500px;
  }
  .chart-footnote {
    font-size: 11px;
    color: #888888;
    margin-top: 16px;
    line-height: 1.5;
  }
  .chart-comment {
    position: absolute;
    left: -280px;
    top: 50%;
    transform: translateY(-50%);
    width: 260px;
    font-size: 22px;
    color: #2a9d8f;
    line-height: 1.4;
    text-align: center;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .chart-comment p {
    margin: 0;
  }

  .chart-insight {
    position: absolute;
    right: -240px;
    top: 50%;
    transform: translateY(-50%) translateX(12px);
    width: 210px;
    text-align: center;
    opacity: 0;
    transition: all 0.4s ease;
    pointer-events: none;
  }
  .chart-insight.visible {
    opacity: 1;
    transform: translateY(-50%) translateX(0);
    pointer-events: auto;
  }
  .insight-block {
    margin-bottom: 18px;
  }
  .insight-block:last-child {
    margin-bottom: 0;
  }
  .insight-number {
    font-size: 46px;
    font-weight: 700;
    line-height: 1;
    margin-bottom: 8px;
  }
  .insight-label {
    font-size: 14px;
    color: #4a4a4a;
    line-height: 1.4;
  }

  .coming-soon {
    margin-top: 80px;
    padding-top: 48px;
    border-top: 2px solid #f0f0f0;
  }
  .coming-soon-title {
    font-size: 36px;
    font-weight: 700;
    color: #333333;
    margin-bottom: 4px;
  }
  .coming-soon-subtitle {
    font-size: 16px;
    color: #888888;
    margin-bottom: 36px;
  }
  .coming-section {
    margin-bottom: 28px;
  }
  .coming-section-name {
    font-size: 18px;
    font-weight: 700;
    color: #333333;
    margin-bottom: 8px;
  }
  .coming-section ul {
    list-style: none;
    padding-left: 0;
  }
  .coming-section li {
    font-size: 15px;
    color: #4a4a4a;
    padding: 4px 0 4px 20px;
    position: relative;
    line-height: 1.5;
  }
  .coming-section li::before {
    content: '·';
    position: absolute;
    left: 4px;
    color: #888888;
    font-weight: 700;
    font-size: 20px;
    line-height: 1.3;
  }

  #lock-screen {
    position: fixed;
    inset: 0;
    z-index: 9999;
    background: #ffffff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 20px;
  }
  #lock-screen.hidden { display: none; }
  #lock-screen h2 {
    font-size: 28px;
    font-weight: 700;
    color: #333333;
  }
  #lock-screen input {
    font-family: 'DM Sans', 'Inter', system-ui, -apple-system, sans-serif;
    font-size: 18px;
    padding: 12px 20px;
    border: 2px solid #e0e0e0;
    border-radius: 10px;
    outline: none;
    width: 280px;
    text-align: center;
    transition: border-color 0.2s;
  }
  #lock-screen input:focus {
    border-color: #2a9d8f;
  }
  #lock-screen input.error {
    border-color: #c60027;
    animation: shake 0.4s ease;
  }
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-8px); }
    75% { transform: translateX(8px); }
  }
  .lock-btn {
    font-family: 'DM Sans', 'Inter', system-ui, -apple-system, sans-serif;
    font-size: 16px;
    padding: 10px 36px;
    border: none;
    border-radius: 10px;
    background: #2a9d8f;
    color: #fff;
    cursor: pointer;
    transition: opacity 0.2s;
  }
  .lock-btn:hover {
    opacity: 0.85;
  }

</style>
</head>
<body>

<div class="toggle-bar">
  <div class="toggle-controls">
    <div class="toggle-group">
      <button class="toggle-btn" data-filter="Andel" onclick="setFilter('Andel')">
        <span class="toggle-dot" style="background: #060786;"></span>
        Andel
      </button>
    </div>
    <div class="toggle-center">
      <button class="toggle-btn active" data-filter="todos" onclick="setFilter('todos')">
        <span class="toggle-dot" style="background: #2a9d8f;"></span>
        General
      </button>
      <button class="toggle-btn" data-filter="ambos" onclick="setFilter('ambos')">
        <span class="toggle-dot" style="background: linear-gradient(135deg, #060786 50%, #c60027 50%);"></span>
        Comparar
      </button>
    </div>
    <div class="toggle-group">
      <button class="toggle-btn" data-filter="Fuenllana" onclick="setFilter('Fuenllana')">
        <span class="toggle-dot" style="background: #c60027;"></span>
        Fuenllana
      </button>
    </div>
  </div>
</div>

<div class="page-content">
  <section class="chart-section">
    <div class="chart-main">
      <div class="chart-title">¿Coinciden familias y alumnado en los efectos del móvil?</div>
      <div class="chart-subtitle">% que percibe deterioro en cada dimensión — barra sólida: alumnado, barra suave: familias</div>
      <div class="chart-container" id="chart" style="height:340px"></div>
      
    </div>
  </section>
</div>

<script>
  var allCharts = [];
  var allOriginals = [];
  (function() {
      var el = document.getElementById('chart');
      var chart = echarts.init(el, null, { renderer: 'svg' });
      var opt = {
  "tooltip": {
    "trigger": "axis",
    "backgroundColor": "rgba(255,255,255,0.96)",
    "borderColor": "#eee",
    "borderWidth": 1,
    "textStyle": {
      "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
      "color": "#333333",
      "fontSize": 13
    },
    "axisPointer": {
      "type": "shadow",
      "shadowStyle": {
        "color": "rgba(0,0,0,0.03)"
      }
    }
  },
  "legend": {
    "show": false,
    "selected": {
      "Todos — Alumnado": true,
      "Todos — Familias": true,
      "Andel — Alumnado": false,
      "Andel — Familias": false,
      "Fuenllana — Alumnado": false,
      "Fuenllana — Familias": false
    }
  },
  "graphic": [
    {
      "type": "rect",
      "left": 0,
      "top": 8,
      "shape": {
        "width": 16,
        "height": 16,
        "r": 3
      },
      "style": {
        "fill": "#2a9d8f"
      }
    },
    {
      "type": "text",
      "left": 22,
      "top": 9,
      "style": {
        "text": "Alumnado",
        "fontSize": 13,
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fill": "#4a4a4a"
      }
    },
    {
      "type": "rect",
      "left": 115,
      "top": 8,
      "shape": {
        "width": 16,
        "height": 16,
        "r": 3
      },
      "style": {
        "fill": "rgba(42, 157, 143, 0.35)"
      }
    },
    {
      "type": "text",
      "left": 137,
      "top": 9,
      "style": {
        "text": "Familias",
        "fontSize": 13,
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fill": "#4a4a4a"
      }
    }
  ],
  "grid": {
    "left": 10,
    "right": 60,
    "top": 40,
    "bottom": 10,
    "containLabel": true
  },
  "yAxis": {
    "type": "category",
    "data": [
      "Relaciones sociales",
      "Rendimiento académico",
      "Comunicación familiar",
      "Lectura"
    ],
    "axisLabel": {
      "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
      "fontSize": 13,
      "color": "#4a4a4a",
      "width": 180,
      "overflow": "break"
    },
    "axisLine": {
      "show": false
    },
    "axisTick": {
      "show": false
    }
  },
  "xAxis": {
    "type": "value",
    "axisLabel": {
      "formatter": "{value}%",
      "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
      "fontSize": 13,
      "color": "#888888"
    },
    "splitLine": {
      "lineStyle": {
        "color": "#f0f0f0",
        "type": "dashed"
      }
    },
    "axisLine": {
      "show": false
    },
    "axisTick": {
      "show": false
    }
  },
  "series": [
    {
      "name": "Todos — Alumnado",
      "type": "bar",
      "data": [
        3.7,
        12.5,
        8.5,
        25.8
      ],
      "itemStyle": {
        "color": "#2a9d8f",
        "borderRadius": [
          0,
          6,
          6,
          0
        ]
      },
      "barMaxWidth": 14,
      "barGap": "30%",
      "label": {
        "show": true,
        "position": "right",
        "formatter": "{c}%",
        "fontSize": 14,
        "color": "#3a3a3a",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fontWeight": 600
      }
    },
    {
      "name": "Todos — Familias",
      "type": "bar",
      "data": [
        6.2,
        14.9,
        20.1,
        37.5
      ],
      "itemStyle": {
        "color": "rgba(42, 157, 143, 0.35)",
        "borderRadius": [
          0,
          6,
          6,
          0
        ]
      },
      "barMaxWidth": 14,
      "barGap": "30%",
      "label": {
        "show": true,
        "position": "right",
        "formatter": "{c}%",
        "fontSize": 14,
        "color": "#3a3a3a",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fontWeight": 600
      }
    },
    {
      "name": "Andel — Alumnado",
      "type": "bar",
      "data": [
        4.8,
        13.9,
        7.9,
        28.3
      ],
      "itemStyle": {
        "color": "#060786",
        "borderRadius": [
          0,
          6,
          6,
          0
        ]
      },
      "barMaxWidth": 14,
      "barGap": "30%",
      "label": {
        "show": true,
        "position": "right",
        "formatter": "{c}%",
        "fontSize": 14,
        "color": "#3a3a3a",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fontWeight": 600
      }
    },
    {
      "name": "Andel — Familias",
      "type": "bar",
      "data": [
        5.7,
        16.1,
        22.9,
        43.4
      ],
      "itemStyle": {
        "color": "rgba(6, 7, 134, 0.35)",
        "borderRadius": [
          0,
          6,
          6,
          0
        ]
      },
      "barMaxWidth": 14,
      "barGap": "30%",
      "label": {
        "show": true,
        "position": "right",
        "formatter": "{c}%",
        "fontSize": 14,
        "color": "#3a3a3a",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fontWeight": 600
      }
    },
    {
      "name": "Fuenllana — Alumnado",
      "type": "bar",
      "data": [
        2.7,
        11.2,
        8.9,
        23.5
      ],
      "itemStyle": {
        "color": "#c60027",
        "borderRadius": [
          0,
          6,
          6,
          0
        ]
      },
      "barMaxWidth": 14,
      "barGap": "30%",
      "label": {
        "show": true,
        "position": "right",
        "formatter": "{c}%",
        "fontSize": 14,
        "color": "#3a3a3a",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fontWeight": 600
      }
    },
    {
      "name": "Fuenllana — Familias",
      "type": "bar",
      "data": [
        6.7,
        13.8,
        17.5,
        32.0
      ],
      "itemStyle": {
        "color": "rgba(198, 0, 39, 0.35)",
        "borderRadius": [
          0,
          6,
          6,
          0
        ]
      },
      "barMaxWidth": 14,
      "barGap": "30%",
      "label": {
        "show": true,
        "position": "right",
        "formatter": "{c}%",
        "fontSize": 14,
        "color": "#3a3a3a",
        "fontFamily": "'DM Sans', 'Inter', system-ui, -apple-system, sans-serif",
        "fontWeight": 600
      }
    }
  ],
  "animationDuration": 800,
  "animationEasing": "cubicOut"
};
      allOriginals.push(JSON.parse(JSON.stringify(opt)));
      chart.setOption(opt);
      allCharts.push(chart);
      chart._el = el;
      window.addEventListener('resize', function() { chart.resize(); });
      chart._howCompare = 'default';
  })();

  var LABEL_DEFAULT = '#3a3a3a';
  var COLOR_ANDEL = '#060786';
  var COLOR_FUENLLANA = '#c60027';

  
function shouldShow(name, mode) {
  var isTodos = name.indexOf('Todos') === 0;
  var isAndel = name.indexOf('Andel') === 0;
  var isFuenllana = name.indexOf('Fuenllana') === 0;
  if (mode === 'todos') return isTodos;
  if (mode === 'ambos') return isAndel || isFuenllana;
  if (mode === 'Andel') return isAndel;
  if (mode === 'Fuenllana') return isFuenllana;
  return false;
}

function applyFilter(mode) {
  document.querySelectorAll('.school-block').forEach(function(el) {
    var s = el.dataset.school;
    var show = (mode === 'todos' && s === 'todos') ||
               (mode === 'Andel' && s === 'Andel') ||
               (mode === 'Fuenllana' && s === 'Fuenllana') ||
               (mode === 'ambos' && (s === 'Andel' || s === 'Fuenllana'));
    el.style.display = show ? '' : 'none';
  });
  allCharts.forEach(function(chart, idx) {
    var section = chart._el ? chart._el.closest('.chart-section') : null;
    if (chart._howCompare === 'sideBySide' && chart._compareFn) {
      chart._compareFn(mode);
    }
    if (section && section.style.display === 'none') return;
    var content = chart._el ? chart._el.closest('.section-content') : null;
    if (content && !content.classList.contains('expanded')) return;
    if (section) section.style.display = '';
    var insightEl = section ? section.querySelector('.chart-insight') : null;
    if (insightEl) {
      insightEl.classList.toggle('visible', mode === 'ambos');
    }
    var opt = chart.getOption();
    var seriesUpdate = [];
    opt.series.forEach(function(s) {
      var lc = LABEL_DEFAULT;
      if (mode === 'ambos') {
        if (s.name.indexOf('Andel') === 0) lc = COLOR_ANDEL;
        else if (s.name.indexOf('Fuenllana') === 0) lc = COLOR_FUENLLANA;
      }
      seriesUpdate.push({ label: { color: lc } });
    });
    chart.setOption({ series: seriesUpdate });
    var names = opt.series.map(function(s) { return s.name; });
    names.forEach(function(name) {
      chart.dispatchAction({ type: shouldShow(name, mode) ? 'legendSelect' : 'legendUnSelect', name: name });
    });
  });
}

var _currentMode = null;
function setFilter(mode) {
  document.querySelectorAll('.toggle-btn').forEach(function(btn) {
    btn.classList.toggle('active', btn.dataset.filter === mode);
  });
  _currentMode = mode;
  applyFilter(mode);
}


  setFilter('todos');
</script>
</body>
</html>